<html lang="ro">
    <head>
     <meta charset="UTF-8">
    <title>Mr. Smoothie</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee+Outline&display=swap" rel="stylesheet">
    </head>
    <body>
    
      <header class="navbar">
        <a href="index.html">
            <img src="logo_smoothie.png" class="logo">
        </a>
        <nav>
            <a href="index.html">AcasƒÉ</a>
            <a href="about.html">Despre</a>
            <a href="menu.html">Meniu</a>
            <a href="cart.html">Co»ô</a>
            <a href="contact.html">Contact</a>
        </nav>
        <button id="modeToggle">üåô</button>
      </header>

    <section class="products" id="products">
        <h1 class="heading">Produsele noastre</h1>
        
        <div class="search-container">
            <input type="text" id="searchInput" onkeyup="filterSmoothies()" placeholder="Numele sortimentului...">
            <button onclick="filterSmoothies()">CautƒÉ</button>
        </div>

        <div class="product-grid">
            
            <div class="box" onclick="flipCard(this, event)">
                <div class="card-inner">
                    <div class="card-front">
                        <img src="product_mango.png" alt="Smoothie Mango">
                        <h3>Mango</h3>
                        <div class="price">15 lei</div>
                        <a href="" class="add_btn" onclick="event.stopPropagation(); addToCart('Mango', 15)">AdaugƒÉ √Æn co»ô</a>
                    </div>
                    <div class="card-back">
                        <div class="back-content">
                            <img src="product_mango.png" alt="Smoothie Mango">
                            <h4>Ingrediente Mango</h4>
                            <ul>
                                <li>Mango</li>
                                <li>Iaurt grecesc</li>
                                <li>Lapte de cocos</li>
                                <li>Miere naturalƒÉ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="box" onclick="flipCard(this, event)">
                <div class="card-inner">
                    <div class="card-front">
                        <img src="product_capsuni.png" alt="Smoothie CƒÉp»ôuni">
                        <h3>CƒÉp»ôuni</h3>
                        <div class="price">15 lei</div>
                        <a href="" class="add_btn" onclick="event.stopPropagation(); addToCart('CƒÉp»ôuni', 15)">AdaugƒÉ √Æn co»ô</a>
                    </div>
                    <div class="card-back">
                         <div class="back-content">
                            <img src="product_capsuni.png" alt="Smoothie CƒÉp»ôuni">
                            <h4>Ingrediente CƒÉp»ôuni</h4>
                            <ul>
                                <li>CƒÉp»ôuni proaspete</li>
                                <li>Banane</li>
                                <li>Lapte de migdale</li>
                                <li>Semin»õe de Chia</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="box" onclick="flipCard(this, event)">
                <div class="card-inner">
                    <div class="card-front">
                        <img src="product_arahide.png" alt="Smoothie Unt de Arahide">
                        <h3>Unt de Arahide</h3>
                        <div class="price">15 lei</div>
                        <a href="" class="add_btn" onclick="event.stopPropagation(); addToCart('Unt de Arahide', 15)">AdaugƒÉ √Æn co»ô</a>
                    </div>
                    <div class="card-back">
                         <div class="back-content">
                            <img src="product_arahide.png" alt="Smoothie Unt de Arahide">
                            <h4>Ingrediente Unt de Arahide</h4>
                            <ul>
                                <li>Unt de Arahide natural</li>
                                <li>Banane</li>
                                <li>Lapte integral</li>
                                <li>PudrƒÉ de ProteinƒÉ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="box" onclick="flipCard(this, event)">
                <div class="card-inner">
                    <div class="card-front">
                        <img src="product_cacao.png" alt="Smoothie Cacao">
                        <h3>Cacao</h3>
                        <div class="price">15 lei</div>
                        <a href="" class="add_btn" onclick="event.stopPropagation(); addToCart('Cacao', 15)">AdaugƒÉ √Æn co»ô</a>
                    </div>
                    <div class="card-back">
                         <div class="back-content">
                            <img src="product_cacao.png" alt="Smoothie Cacao">
                            <h4>Ingrediente Cacao</h4>
                            <ul>
                                <li>Banane congelate</li>
                                <li>Lapte de ovƒÉz</li>
                                <li>PudrƒÉ de Cacao organicƒÉ</li>
                                <li>Curmale</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="box" onclick="flipCard(this, event)">
                <div class="card-inner">
                    <div class="card-front">
                        <img src="product_spirulina.png" alt="Smoothie SpirulinƒÉ">
                        <h3>SpirulinƒÉ</h3>
                        <div class="price">15 lei</div>
                        <a href="" class="add_btn" onclick="event.stopPropagation(); addToCart('SpirulinƒÉ', 15)">AdaugƒÉ √Æn co»ô</a>
                    </div>
                    <div class="card-back">
                         <div class="back-content">
                            <img src="product_spirulina.png" alt="Smoothie SpirulinƒÉ">
                            <h4>Ingrediente SpirulinƒÉ</h4>
                            <ul>
                                <li>SpirulinƒÉ purƒÉ</li>
                                <li>Spanac proaspƒÉt</li>
                                <li>Kiwi</li>
                                <li>ApƒÉ de Cocos</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="box" onclick="flipCard(this, event)">
                <div class="card-inner">
                    <div class="card-front">
                        <img src="product_kiwi.png" alt="Smoothie Kiwi">
                        <h3>Kiwi</h3>
                        <div class="price">15 lei</div>
                        <a href="" class="add_btn" onclick="event.stopPropagation(); addToCart('Kiwi', 15)">AdaugƒÉ √Æn co»ô</a>
                    </div>
                    <div class="card-back">
                         <div class="back-content">
                            <img src="product_kiwi.png" alt="Smoothie Kiwi">
                            <h4>Ingrediente Kiwi</h4>
                            <ul>
                                <li>Kiwi</li>
                                <li>Ananas</li>
                                <li>Iaurt grecesc</li>
                                <li>Semin»õe de LƒÉm√¢ie</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div> 

        <div class="nutrition-cta">
            <a href="nutrition.html" class="cta-button">
                Informa»õii Nutri»õionale
            </a>
        </div>
    </section>

    <button id="upBtn" class="scroll-btn up-btn" aria-label="Scroll to Top">
        &uarr; <!-- SƒÉgeatƒÉ Unicode √Æn sus -->
    </button>
    <button id="downBtn" class="scroll-btn down-btn" aria-label="Scroll to Bottom">
        &darr; <!-- SƒÉgeatƒÉ Unicode √Æn jos -->
    </button>

    <div id="overlay" class="overlay"></div>

       <script>
        // ... (Scriptul existent pentru Dark Mode »ôi eviden»õierea linkului activ rƒÉm√¢ne aici) ...
        const modeToggle = document.getElementById('modeToggle');

        // verificƒÉm dacƒÉ existƒÉ modul salvat
        if(localStorage.getItem('mode')) {
            document.body.className = localStorage.getItem('mode');
            modeToggle.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
        }

        modeToggle.addEventListener('click', () => {
            if(document.body.classList.contains('dark-mode')) {
                document.body.classList.remove('dark-mode');
                document.body.classList.add('light-mode');
                localStorage.setItem('mode', 'light-mode');
                modeToggle.textContent = 'üåô';
            } else {
                document.body.classList.remove('light-mode');
                document.body.classList.add('dark-mode');
                localStorage.setItem('mode', 'dark-mode');
                modeToggle.textContent = '‚òÄÔ∏è';
            }
        });
    </script>

    <script>
// Cod pentru eviden»õierea linkului activ
document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('header nav a');
    const currentPath = window.location.pathname.split('/').pop(); // Extrage numele fi»ôierului

    navLinks.forEach(link => {
        // Ob»õine numele fi»ôierului din href (ex: 'home.html')
        const linkPath = link.getAttribute('href'); 
        
        // VerificƒÉm dacƒÉ linkPath se potrive»ôte cu currentPath, adƒÉugƒÉm clasa 'active'.
        if (linkPath === currentPath) {
            link.classList.add('active');
        } 
    });
});
    </script>
    
    <script>
        function flipCard(card, event) {
            // IgnorƒÉ click-ul pe butonul AdaugƒÉ √Æn co»ô (oprirea se face »ôi prin onclick="event.stopPropagation()")
            if (event.target.closest('.add_btn') || event.target.closest('.close-btn')) {
                return; 
            }

            const overlay = document.getElementById('overlay');

            // 1. DacƒÉ se dƒÉ click pe un card deja mƒÉrit (pentru a-l √Æntoarce la fa»õƒÉ)
            if (card.classList.contains('is-expanded')) {
                // Rotim cardul √Ænapoi
                card.classList.remove('is-flipped');
                
                // √énchidem expansiunea dupƒÉ anima»õia de flip
                setTimeout(() => {
                    closeCard(card);
                }, 500); // 500ms = duratƒÉ tranzi»õie CSS
                return;
            }
            
            // 2. Expansiunea »ôi Flipping-ul (c√¢nd se dƒÉ click prima datƒÉ)
            
            // DƒÉm clasa de mƒÉrire cardului
            card.classList.add('is-expanded');
            
            // Rotim cardul pu»õin mai t√¢rziu, ca sƒÉ se vadƒÉ √Ænt√¢i mƒÉrirea
            setTimeout(() => {
                card.classList.add('is-flipped');
            }, 10);
            
            // ActivƒÉm overlay-ul
            overlay.classList.add('active');

            // NOU: AdƒÉugƒÉm o clasƒÉ pe body
            document.body.classList.add('modal-open'); 
            
            // Oprim scroll-ul pe body
            document.body.style.overflow = 'hidden';
        }

        function closeCard(card) {
            const overlay = document.getElementById('overlay');
            
            // 1. √éntoarcem cardul la fa»õƒÉ (dacƒÉ nu e deja)
            card.classList.remove('is-flipped');

            // 2. Scoatem overlay-ul »ôi scroll-ul
            overlay.classList.remove('active');
            document.body.classList.remove('modal-open');
            document.body.style.overflow = '';
            
            // 3. Scoatem clasa de mƒÉrire dupƒÉ ce anima»õia de flip s-a terminat
            setTimeout(() => {
                card.classList.remove('is-expanded');
            }, 500); // 500ms = duratƒÉ tranzi»õie CSS
        }

        // √énchide cardul c√¢nd se apasƒÉ pe overlay
        document.addEventListener('DOMContentLoaded', () => {
            const overlay = document.getElementById('overlay');
            if (overlay) {
                overlay.addEventListener('click', () => {
                    const activeCard = document.querySelector('.box.is-expanded');
                    if (activeCard) {
                        closeCard(activeCard);
                    }
                });
            }
        });
    </script>

    <script>
        function filterSmoothies() {
            // PreluƒÉm textul de cƒÉutare »ôi √Æl convertim la minuscule
            const filter = document.getElementById('searchInput').value.toUpperCase();
            
            // PreluƒÉm toate cardurile de smoothie
            const grid = document.querySelector('.product-grid');
            const boxes = grid.querySelectorAll('.box');

            // Parcurgem fiecare card
            boxes.forEach(box => {
                // PreluƒÉm numele smoothie-ului (din card-inner -> card-front -> h3)
                const nameElement = box.querySelector('.card-front h3');
                
                if (nameElement) {
                    const name = nameElement.textContent.toUpperCase();
                    
                    // VerificƒÉm dacƒÉ numele include textul cƒÉutat
                    if (name.indexOf(filter) > -1) {
                        box.classList.remove('hidden');
                    } else {
                        box.classList.add('hidden');
                    }
                }
            });
        }
    </script>

    <script>
            const upBtn = document.getElementById('upBtn');
            const downBtn = document.getElementById('downBtn');

            const toggleScrollButtons = () => {
                const scrollPosition = window.scrollY || document.documentElement.scrollTop;
                const documentHeight = document.documentElement.scrollHeight;
                const windowHeight = window.innerHeight;

                // 1. Logic for UP button (shows after scrolling down 200px)
                if (upBtn) { 
                    if (scrollPosition > 200) {
                        upBtn.classList.add('show');
                    } else {
                        upBtn.classList.remove('show');
                    }
                }

                // 2. Logic for DOWN button (shows unless we are near the very bottom AND the page is scrollable)
                if (downBtn) {
                    // Check if the page is actually scrollable (document height > window height)
                    const isScrollable = documentHeight > windowHeight + 10; // +10 for buffer
                    
                    // Show if scrollable AND not at the very bottom (with 50px tolerance)
                    if (isScrollable && (scrollPosition + windowHeight < documentHeight - 50)) {
                        downBtn.classList.add('show');
                    } else {
                        downBtn.classList.remove('show');
                    }
                }
            };

            // Apelul imediat, mult mai fiabil dec√¢t window.load, pentru a seta starea ini»õialƒÉ
            toggleScrollButtons();

            // Evenimentul de scroll
            window.addEventListener('scroll', toggleScrollButtons);
            // Re-verificƒÉ la redimensionare (pentru a vedea dacƒÉ pagina devine/nu mai este scrollabilƒÉ)
            window.addEventListener('resize', toggleScrollButtons); 

            // Func»õiile de scroll efective
            if (upBtn) {
                upBtn.addEventListener('click', () => {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }

            if (downBtn) {
                downBtn.addEventListener('click', () => {
                    // DeruleazƒÉ la sf√¢r»ôitul documentului
                    window.scrollTo({
                        top: document.body.scrollHeight,
                        behavior: 'smooth'
                    });
                });
            }
        </script>

        <script>
        function addToCart(name, price) {
            // PreluƒÉm co»ôul existent din localStorage sau ini»õializƒÉm un array gol
            let cart = JSON.parse(localStorage.getItem('smoothieCart')) || [];
            
            // VerificƒÉm dacƒÉ produsul existƒÉ deja √Æn co»ô
            const existingItem = cart.find(item => item.name === name);

            if (existingItem) {
                // DacƒÉ existƒÉ, cre»ôtem doar cantitatea
                existingItem.quantity += 1;
            } else {
                // DacƒÉ nu existƒÉ, adƒÉugƒÉm un obiect nou
                cart.push({ name: name, price: price, quantity: 1 });
            }

            // SalvƒÉm noul co»ô √Æn localStorage
            localStorage.setItem('smoothieCart', JSON.stringify(cart));
            
            // NotificƒÉm utilizatorul (op»õional)
            alert(`${name} a fost adƒÉugat √Æn co»ô!`);
        }
    </script>
    </body>

</html>
